<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[// Handles outbound-call click
function handleCallButtonClick() {
	var outboundPhoneNumber = document.getElementById('outboundPhoneNumber').value;
	console.log('state:');
	console.log(state);
}

// Handles agent-status change
function handleAgentStatusChange() {
	var status = document.getElementById('agentStatus').value;
	console.log('status: ' + status);
	if (status === 'ready') {
		var username = 'web2';
		var password = 'Spoken@1';
		var url = 'wss://moon-webphone.bpo.avaya.com:8081/ses/webphone';
		commandToWebPhone('initialize', {username: username, password: password, url: url})
		.then(function() {
			console.log('initialized!');
			commandToWebPhone('changeStateToReady')
            .then(function() {
                console.log('agent is ready');
            });
		});
	}
}

function refreshControls() {
	
}]]></client_script>
        <description>Main page</description>
        <direct>false</direct>
        <endpoint>x_425089_voice_index.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/stomp.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/webphone.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/common.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/assets/require.min.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/AudioManager.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/sip/sip-service.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/sip/SipClient.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/sip/jssip.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/sip/SipSessionClient.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/http/agent-service.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/ses/Serializer.js"></script>
	<script src="https://mars-omni.bpo.avaya.com/ccphone1/services/ses/SesClient.js"></script>
<!-- 	<script src="https://mars-omni.bpo.avaya.com/ccphone1/webphone.js"></script> -->
	
	<h2>Voice App</h2>
	<!-- Agent status -->
	<div>
		<label for="agentStatus">Select:</label>
		<select id="agentStatus" name="voiceStatus" onchange="handleAgentStatusChange()">
			<option value="">Select...</option>
			<option value="offline">Offline</option>
			<option value="notReady">Not Ready</option>
			<option value="afterCallWork">After Call Work</option>
			<option value="ready">Ready</option>
		</select>
	</div>
	<!-- Outbound phone -->
	<div>
		<label for="outboundPhoneNumber">Phone:</label>
		<input type="text" name="outboundPhoneNumber" id="outboundPhoneNumber" />
		<button type="button" name="callButton" value="Call" onclick="handleCallButtonClick()">
			Call
		</button> 
	</div>
</j:jelly>]]></html>
        <name>index</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-11-15 18:40:07</sys_created_on>
        <sys_id>fc6e998bdb010010636ba9954b96198e</sys_id>
        <sys_mod_count>33</sys_mod_count>
        <sys_name>index</sys_name>
        <sys_package display_value="voice" source="x_425089_voice">dacd5dc7db010010636ba9954b961956</sys_package>
        <sys_policy/>
        <sys_scope display_value="voice">dacd5dc7db010010636ba9954b961956</sys_scope>
        <sys_update_name>sys_ui_page_fc6e998bdb010010636ba9954b96198e</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-11-15 23:25:27</sys_updated_on>
    </sys_ui_page>
</record_update>
